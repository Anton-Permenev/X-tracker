<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<ui:define name="metadata">
    <f:metadata>
        <f:viewParam name="user_id" value="#{trackListBean.userId}"/>
        <f:viewParam name="track_id" value="#{trackInfoBean.trackId}"/>
    </f:metadata>
</ui:define>
<h:head>
    <h:outputStylesheet name="dist/css/AdminLTE.min.css"/>
    <h:outputStylesheet name="bootstrap/css/bootstrap.min.css"/>
    <h:outputStylesheet name="dist/css/skins/skin-blue.min.css"/>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script src="resources/dist/js/jQuery-2.1.3.min.js" type="text/javascript"></script>
    <!-- Bootstrap 3.3.2 JS -->
    <script src="resources/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <!-- AdminLTE App -->
    <script src="resources/dist/js/app.min.js" type="text/javascript"></script>
    <script src="resources/dist/js/pages/dashboard.js" type="application/javascript"></script>

    <!-- Font Awesome Icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"
          type="text/css"/>
    <!-- Ionicons -->
    <link href="http://code.ionicframework.com/ionicons/2.0.0/css/ionicons.min.css" rel="stylesheet" type="text/css"/>
</h:head>
<h:body styleClass="skin-blue fixed" onload="loadMap()">
    <div class="wrapper">
        <header class="main-header">
            <a href="index.xhtml" class="logo"><b>X-tracker</b></a>
            <nav class="navbar navbar-static-top" role="navigation">
                <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                    <span class="sr-only">Toggle navigation</span>
                </a>

                <div class="navbar-custom-menu">
                </div>
            </nav>
        </header>
        <aside class="main-sidebar">

            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <!-- seach form (Optional) -->
                <!-- Sidebar Menu -->
                <ul class="sidebar-menu">
                    <!-- Optionally, you can add icons to the links -->
                    <ui:repeat value="#{trackListBean.trackList}" var="track">
                        <li>
                            <a href="#">
                                <span>#{track.trackId} </span>
                                <h6 style="color:rgb(60,141,188);margin-top: 0;margin-bottom: 0;">#{track.title}</h6>
                            </a>
                        </li>
                    </ui:repeat>
                </ul>
                <!-- /.sidebar-menu -->
            </section>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    Page Header
                    <small>Optional description</small>
                </h1>
            </section>

            <!-- Main content -->
            <section class="content">

                <!-- Your Page Content Here -->
                <div id="map_container" style="width:100%;  height:500px;"></div>
            </section>
            <!-- /.content -->
        </div>
        <!-- /.content-wrapper -->

        <!-- Main Footer -->
        <div class="main-footer">
            <!-- footer -->
        </div>

    </div>

    <script type="text/javascript">
        var points = #{trackInfoBean.pointsAsJson};
        var POINTS = [];
        for (var i = 0; points.length > i; i++) {
            POINTS.push(new google.maps.LatLng(points[i].lat, points[i].lon));
        }
        ;
        loadTrack(POINTS);
    </script>



</h:body>
</html>
